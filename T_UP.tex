\section{Project: Unique product groups}
\label{section:UP}

Let $G$ be a group and $A,B\subseteq G$ be non-empty subsets. 
An element $g\in G$ is a \emph{unique product} in $AB$ if $g=ab=a_1b_1$ for some
$a,a_1\in
A$ and $b,b_1\in B$ implies that $a=a_1$ and $b=b_1$.

\begin{definition}
	\index{Group!unique product}
	A group $G$ has the \emph{unique product property} if 
	for every finite non-empty subsets $A,B\subseteq G$ there exists at least one
	unique product in $AB$.
\end{definition}

\begin{proposition}
    Left-ordered groups have the unique product property.
\end{proposition}

\begin{proof}
    Let $G$ be a left-ordered group. 
	Let $A$ be a non-empty finite subset of $G$ and $B=\{b_1,\dots,b_n\}\subseteq G$. 
	Assume that $b_1<b_2<\cdots<b_n$. Let $c\in A$ be such that $cb_1$ is the 
	minimum of $Ab_1=\{ab_1:a\in A\}$. We claim that $cb_1$ admits a unique
	representation of the form $\alpha\beta$ with $\alpha\in A$ and 
	$\beta\in B$. If $cb_1=ab$, then, since $ab=cb_1\leq ab_1$, it follows that 
	$b\leq b_1$. Hence $b=b_1$ and $a=c$. 
\end{proof}

\begin{exercise}
	Prove that groups with the unique product property are
	torsion-free.
\end{exercise}

The converse does not hold. 
Promislow's group is a celebrated counterexample.

\begin{theorem}[Promislow]
\index{Promislow's theorem}
    The group $G=\langle a,b:a^{-1}b^2a=b^{-2},b^{-1}a^2b=a^{-2}\rangle$
    does not have the unique product property.
\end{theorem}

\begin{proof}
    Let 
    \begin{multline}
    \label{eq:Promislow}
    S=\{ a^2b,
    b^2a,
    aba^{-1},
    (b^2a)^{-1},
    (ab)^{-2},
    b,
    (ab)^2a,
    (ab)^2,
    (aba)^{-1},\\
    bab,
    b^{-1},
    a,
    aba,
    a^{-1}
    \}.
    \end{multline}
    We use \cite{GAP4} and the representation $G\to\GL_4(\Q)$ given by 
    \[
a\mapsto\begin{pmatrix}
1 & 0 & 0 & 1/2\\
0 & -1 & 0 & 1/2\\
0 & 0 & -1 & 0\\
0 & 0 & 0 & 1
\end{pmatrix},
\quad
b\mapsto\begin{pmatrix}
-1 & 0 & 0 & 0\\
0 & 1 & 0 & 1/2\\
0 & 0 & -1 & 1/2\\
0 & 0 & 0 & 1
\end{pmatrix}
\]
    to check that 
    $G$ does not have
    unique product property, as each 
    \[
    s\in S^2=\{s_1s_2:s_1,s_2\in S\}
    \]
    admits at least two different decompositions of the 
    form $s=xy=uv$ for $x,y,u,v\in S$. 
    We first create the matrix representations of $a$ and $b$.
\begin{lstlisting}
gap> a := [[1,0,0,1/2],[0,-1,0,1/2],[0,0,-1,0],[0,0,0,1]];;
gap> b := [[-1,0,0,0],[0,1,0,1/2],[0,0,-1,1/2],[0,0,0,1]];;
\end{lstlisting}
    Now we create
    a function that produces the set $S$.
\begin{lstlisting}
gap> Promislow := function(x, y)
> return Set([
> x^2*y,
> y^2*x,
> x*y*Inverse(x),
> (y^2*x)^(-1),
> (x*y)^(-2),
> y,
> (x*y)^2*x,
> (x*y)^2,
> (x*y*x)^(-1),
> y*x*y,
> y^(-1),
> x,
> x*y*x,
> x^(-1)
]);
end;;
\end{lstlisting}
So the set $S$ of \eqref{eq:Promislow} 
will be \lstinline{Promislow(a,b)}. We now
create a function that checks whether
every element of a Promislow subset 
admits more than one representation.
\begin{lstlisting}
gap> is_UPP := function(S)
> local l,x,y;
> l := [];
> for x in S do
> for y in S do
> Add(l,x*y);
> od;
> od;
> if ForAll(Collected(l), x->x[2] <> 1) then
> return false;
> else
> return fail;
> fi;
> end;;
\end{lstlisting}
Finally, we check whether every element of 
$S^2$ admits more than one representation.
\begin{lstlisting}
gap> S := Promislow(a,b);;
gap> is_UPP(S);
false
\end{lstlisting}
This completes the proof. 
\end{proof}

\begin{exercise}
\label{xca:A1Bm}
    Let $G$ be a group and $A,B\subseteq G$ be finite non-empty subsets. Prove that 
    if $|A|=1$, then $AB$ contains a unique product. 
\end{exercise}




The size of the set $A$ can be extended. 

\begin{exercise}
\label{xca:gABh}
    Let $G$ be a group and $A,B\subseteq G$ be finite non-empty subsets. Prove that
    $AB$ has no unique products 
    if and only if $(gA)(Bh)$ has no unique product for all $g,h\in G$. 
\end{exercise}


\begin{exercise}
\label{xca:A2Bm}
    Let $G$ be a torsion-free group and $A,B\subseteq G$ be finite non-empty subsets. Prove that 
    if $|A|=2$, then $AB$ contains a unique product. 
\end{exercise}

The case where the set $A$ has size three is still open. One can prove, for example, 
that if $|A|=3$, then $|B|\geq7$. 

% There are other examples. 

% \begin{exercise}
%     Let $G=\langle x,y:x^{-1}y^2xy^2=x^{-2}yx^{-2}y^3=1\rangle$. 
%     \begin{enumerate}
%         \item Prove that the subgroup $N$ generated by 
%         \[
%         [y*x*Inverse(x*y), y^2, x^4]
%         \]
%         is a normal subgroup of index eight. 
%         \item Prove that 
%         \[
%         N=\langle x_1,x_2,x_3:[x_1,x_2]=[x_1,x_3]=1,\,x_3x_2=x_2x_3x_1^8\rangle.
%         \]

%     \end{enumerate}
% \end{exercise}

% Let $G=\langle x,y:x^{-1}y^2xy^2=x^{-2}yx^{-2}y^3=1\rangle$. 
% We first construct the group and a certain normal
% subgroup $N$ of index eight. 

% \begin{lstlisting}
% gap> f := FreeGroup(2);;
% gap> x := f.1;;
% gap> y := f.2;;
% gap> rels := [Inverse(x)*y^2*x*y^2, Inverse(x^2)*y*Inverse(x^2)*y^3];;
% gap> G := f/rels;;
% gap> x := G.1;;
% gap> y := G.2;;
% gap> N := Subgroup(G, [y*x*Inverse(x*y), y^2, x^4]);
% gap> IsNormal(N,G);
% true
% gap> StructureDescription(G/N);
% "C4 x C2"
% \end{lstlisting}
% The subgroup $N$ has a nice presentation. It can be presented
% as the group 
% \[
% N=\langle x_1,x_2,x_3:[x_1,x_2]=[x_1,x_3]=1,\,x_3x_2=x_2x_3x_1^8\rangle.
% \]
% \begin{lstlisting}
% gap> g := IsomorphismFpGroup(N);
% gap> RelatorsOfFpGroup(Image(g));
% [ F3*F1*F3^-1*F1^-1, F2*F1*F2^-1*F1^-1, F1*F3^-1*F1^5*F2*F1^2*F3*F2^-1 ]
% \end{lstlisting}
% From these relations
% one proves by induction that 
% \begin{align}
%     x_3^bx_2^a=x_2^ax_3^bx_1^{8ab}
% \end{align}
% for all $a,b\in\Z$. 
% % First induction in $n_1$, then induction in $n_2$. 
% It follows that every element of $N$ 
% is of the form $x_1^{n_1}x_2^{n_2}x_3^{n_3}$ 
% for $n_1,n_2,n_3\in\Z$. Moreover, 
% \[
% (x_1^{n_1}x_2^{n_2}x_3^{n_3})^k=x_1^{kn_1+(k-1)8n_2n_3}x_2^{kn_2}x_3^{kn_3}
% \]
% for all $k\in\Z$. Note that $x_1^8$ is a commutator. Moreover, 
% $N/[N,N]\simeq\Z\times\Z\times\Z/8$. This implies that
% $N$ is torsion-free. Let us prove that $G$ is torsion-free. 
% Let $\pi\colon G\to G/N$ be the canonical map. Let 
% $g\in G$ be a torsion element, in particular $g\not\in N$
% and hence $\pi(g)\ne 1$. So $\pi(g)$ has order two 
% or four. Without loss of generality we may assume that
% $\pi(g)$ has order two.  
% Then $\pi(g^2)=\pi(g)^2=y^2=1$ and hence 
% $g^2\in N$. Since $N$ is torsion free, it follows that $g=1$. 

\begin{definition}
\index{Group!double unique product}
	A group $G$ has the \emph{double property of unique products} 
	if for every finite non-empty subsets $A,B\subseteq G$ such that 
	$|A|+|B|>2$ there are at least two unique products in $AB$.
\end{definition}

\begin{theorem}[Strojnowski]
	\label{theorem:Strojnowski}
	\index{Strojonowski's theorem}
	Let $G$ be a group. The following statements are equivalent:
	\begin{enumerate}
		\item $G$ has the double property of unique products. 
		\item Every non-empty finite subset $A\subseteq G$ contains at least one unique product 
			in 
   \[
   AA=\{a_1a_2:a_1,a_2\in A\}.
   \]
		\item $G$ has the unique product property.
	\end{enumerate}
\end{theorem}

\begin{proof}
	The implication $(1)\implies(2)$ is trivial.  
	
	We now prove that $(2)\implies(3)$. Suppose that $G$ satisfies $(2)$. Let  $A,B$ be finite non-empty subsets of $G$. Let $C=BA$.  By $(2)$, there exist a unique $g\in G$ such that $g=(b_1a_1)(b_2a_2)$ for unique $b_1a_1,b_2a_2\in C$, where $a_1,a_2\in A$ and $b_1,b_2\in B$. Note that this implies that $a_1b_2=ab$ for $a\in A$ and $b\in B$ if and only if $a=a_1$ and $b=b_2$. Hence $G$ satisfies the unique product property.
	
	We finally prove that $(3)\implies(1)$. Suppose that  $G$ satisfies the unique product property but not the double unique product property. Thus there exist finite non-empty subsets $A,B\subseteq G$ with $|A|+|B|>2$ and there is a unique $g\in G$ such that $g=ab$ for unique elements $a\in A$ and $b\in B$.
	Let $C=a^{-1}A$ and $D=Bb^{-1}$. Then $1\in C\cap D$. Note that if $c\in C$, $d\in D$ and $cd\neq 1$, then there exist $a_1\in A$ and $b_1\in B$ such that $c=a^{-1}a_1$, $d=b_1b^{-1}$ and $ab\neq a_1b_1$. Hence there exist $a_2\in A\setminus\{ a_1\}$ and $b_2\in B\setminus\{ b_1\}$ such that $a_1b_1=a_2b_2$. Let $c_1=a^{-1}a_2$ and $d_1=b_2b^{-1}$. We have that $c\neq c_1$, $d\neq d_1$ and 
	\[ cd=a^{-1}a_1b_1b^{-1}=a^{-1}a_2b_2b^{-1}=c_1d_1.\]
	Let $E=D^{-1}C$ and $F=DC^{-1}$. Every element of $EF$ is of the form $(d_1^{-1}c_1)(d_2c_2^{-1})$, where $c_1,c_2\in C$ and $d_1,d_2\in D$. Suppose that $c_1d_2\ne 1$. We have seen that then there exist $c_3\in C\setminus \{ c_1\}$ and $d_3\in D\setminus\{ d_2\}$ such that $c_1d_2=c_3d_3$. Hence $d_1^{-1}c_3\in E\setminus \{ d_1^{-1}c_1\}$, $d_3c_2^{-1}\in F\setminus\{ d_2c_2^{-1}\}$
	and
	\[ (d_1^{-1}c_1)(d_2c_2^{-1})=(d_1^{-1}c_3)(d_3c_2^{-1}).\]
	Suppose that $c_2d_1\neq 1$. Then there exist $c_4\in C\setminus \{ c_2\}$ and $d_4\in D\setminus\{ d_1\}$ such that $c_2d_1=c_4d_4$. Hence $d_4^{-1}\cdot 1\in E\setminus \{ d_1^{-1}\cdot 1\}$, $1\cdot c_4^{-1}\in F\setminus\{ 1\cdot c_2^{-1}\}$
	and
	\[ (d_1^{-1}\cdot 1)(1\cdot c_2^{-1})=(d_4^{-1}\cdot 1)(1\cdot c_4^{-1}).\]
	Since $|C|+|D|=|A|+|B|>2$, either there exists $c\in C\setminus\{ 1\}$ or there exists $d\in D\setminus\{ 1\}$. In the first case, we have
	\[ (1\cdot 1)(1\cdot 1)=(1\cdot c)(1\cdot c^{-1}),\]
	and in the second case, we have 
		\[ (1\cdot 1)(1\cdot 1)=(d^{-1} \cdot 1)(d\cdot 1).\]
	Thus, we have found two finite non-empty subsets $E,F\subseteq G$ such that for every $e\in E$ and $f\in F$, there exist $e_1\in E\setminus\{ e\}$ and $f_1\in F\setminus\{ f\}$ such that
	$ef=e_1f_1$, a contradiction, because $G$ satisfies the unique product property. Therefore $G$ also satisfies the double unique product property.
\end{proof}

% passman lema 1.9 pag 589
\begin{exercise}
	Prove that if a group $G$ satisfies the unique product property, then 
    $K[G]$ contains only trivial units.
\end{exercise}

In general it is extremely hard to check whether a given group
has the unique product property. As a geometrical way to 
attack this problem, Bowditch introduced \emph{diffuse groups}. If
$G$ is a torsion-free group and 
$A\subseteq G$ is a subset, we say that $A$ is \emph{antisymmetric}  
if $A\cap A^{-1}\subseteq\{1\}$, where $A^{-1}=\{a^{-1}:a\in
A\}$. The set of \emph{extremal elements} of $A$ is defined as 
$\Delta(A)=\{a\in A:Aa^{-1}\text{ is antisymmetric}\}$. 
Thus 
\[
	a\in A\setminus\Delta(A)
	\Longleftrightarrow
	\text{there existes $g\in G\setminus\{1\}$ such that $ga\in A$ and $g^{-1}a\in A$}.
\]

\begin{definition}
	\index{Group!diffuse}
	A group $G$ is \emph{diffuse} if for every finite subset $A\subseteq
	G$ such that $2\leq |A|<\infty$ one has $|\Delta(A)|\geq2$.
\end{definition}

This means that a group $G$ is diffuse if for every finite non-empty subset $A\subseteq G$ there exists 
$a\in A$ such that for all $g\in G\setminus\{1\}$ either $ga\not\in A$ or $g^{-1}a\not\in A$. 

\begin{proposition}
	Left-ordered groups are diffuse.	
\end{proposition}

\begin{proof}
    Let $G$ be a left-ordered group and $A=\{a_1,\dots,a_n\}$ be such that
    \[
    a_1<a_2<\cdots<a_n.
    \]
    We claim that 
	$\{a_1,a_n\}\subseteq\Delta(A)$. If $a_1\in
	A\setminus\Delta(A)$, there exists $g\in G\setminus\{1\}$ such that $ga_1\in A$ and
	$g^{-1}a_1\in A$. Thus  $a_1\leq ga_1$ and $a_1\leq g^{-1}a_1$. It follows that
	$1\leq a^{-1}ga_1$ and $1\leq a_1^{-1}g^{-1}a_1=(a_1^{-1}ga_1)^{-1}$, 
	a contradiction. Similarly, $a_n\in \Delta(A)$.
\end{proof}

There are diffuse groups that are not left-ordered, see
\cite{MR3548136}. 

\begin{proposition}
	\label{pro:difuso=>2up}
    Diffuse groups have double unique products.  
\end{proposition}

\begin{proof}
    Let $G$ be a diffuse group that does not have double unique products. 
    There exist non-empty subsets $A,B\subseteq G$ with $|A|+|B|>2$ such that 
	$C=AB$ admits at most one unique product. Then $|C|\geq2$. Since $G$ is diffse, 
	$|\Delta(C)|\geq2$. If $c\in\Delta(C)$, then $c$ admits a unique 
	expression of the form $c=ab$ with $a\in A$ and $b\in B$ (otherwise, if 
	$c=a_0b_0=a_1b_1$ with $a_0\ne a_1$ and $b_0\ne b_1$). If $g=a_0a_1^{-1}$,
	then $g\ne 1$, 
	\[
	gc=a_0a_1^{-1}a_1b_1=a_0b_1\in C.
	\]
	Moreover, 
	$g^{-1}c=a_1a_0^{-1}a_0b_0=a_1b_0\in C$. Hence $c\not\in\Delta(c)$, a contradiction.
\end{proof}

\begin{problem}
	Find a non-diffuse group with the unique product property.
\end{problem}

%Un grupo $G$ se dice \emph{débilmente difuso} si para todo subconjunto
%finito $A\subseteq G$ no vacío se tiene $\Delta(A)\ne\emptyset$. La técnica
%usada para demostrar el lema~\ref{lemma:difuso=>2up} puede usarse para
%demostrar que un grupo débilmente difuso posee la propiedad del producto
%único. El teorema~\ref{theorem:Strojnowski} sugiere entonces la siguiente
%pregunta: 
%
%\begin{problem}
%	¿Existe un grupo débilmente difuso que no sea difuso?
%\end{problem}
%
%\section{El grupo de Promislow}
%
%Veremos un ejemplo concreto de un grupo sin torsión que no es ordenable, no es
%difuso y no tiene la propiedad del producto único.
%
%\begin{exercise}
%	\label{exercise:Dinfty}
%	Demuestre que $G=\langle x,y:x^2=y^2=1\rangle$ es isomorfo al grupo diedral infinito.
%\end{exercise}
%
%\begin{definition}
%	Se define el grupo de Promislow como 
%	\[
%		G=\langle x,y:x^{-1}y^2x=y^{-2},\,y^{-1}x^2y=x^{-2}\rangle.
%	\]
%\end{definition}
%
%\begin{proposition}
%	\label{proposition:Promislow}
%	El grupo de Promislow es libre de torsión y no satisface la propiedad del
%	producto único. 
%\end{proposition}
%
%\begin{proof}
%	
%\end{proof}

